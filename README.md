# Domain Ping

[![Build Status](https://travis-ci.org/ricardonunesdev/domain-ping.svg?branch=master)](https://travis-ci.org/ricardonunesdev/domain-ping) [![Coverage Status](https://coveralls.io/repos/github/ricardonunesdev/domain-ping/badge.svg?branch=master)](https://coveralls.io/github/ricardonunesdev/domain-ping?branch=master)

[![NPM](https://nodei.co/npm/domain-ping.png)](https://nodei.co/npm/domain-ping/)

A small module that attempts to ping a domain by checking the following:

 - The domain's IP address
 - If the server is responding to pings
 - If the server is responding to HTTP requests for that domain

## Installation

```sh
$ npm install domain-ping --save
```

## Usage

The module exports a Promise that must be handled on your side.

```js
const domainPing = require("domain-ping");

domainPing('github.com') // Insert the domain you want to ping
    .then((res) => {
        console.log(res); // Replace with your code
    })
    .catch((error) => {
        console.error(error);
    });
```

This code should output an object like this:

```js
{ domain: 'github.com',
  ip: '192.30.253.112',
  ping: true,
  online: true,
  statusCode: 200,
  success: true }
```

Where:

 - `domain` is the domain you requested
 - `ip` is the IP address the domain should be pointing to, as defined in the DNS server by an A record
 - `ping` is true if the server is responding to ping requests, false otherwise (false does not mean it's down, ICMP could be blocked on the server's firewall)
 - `online` is true if the server is responding to HTTP requests for the chosen domain, with status code = 200, false otherwise
 - `statusCode` is the actual status code replied by the server in the HTTP request (200, 404, 500, etc)
 - `success` is true if the entire process executed correctly, false otherwise (check Errors below)

## Errors

In case of error, the output should look like this:

```js
{ domain: 'githubabc.com',
  success: false,
  error: 'getaddrinfo ENOTFOUND githubabc.com' }
```

Where:

 - `error` is the actual message generated by the error when it occurred, in the example the domain `githubabc.com` doesn't appear to have an A record on the DNS server

## Tests

```sh
$ npm test
```

## Feedback

Any bug or request should be submitted as an issue [here](https://github.com/ricardonunesdev/domain-ping/issues).

## License

MIT Â© [Ricardo Nunes](https://github.com/ricardonunesdev)
